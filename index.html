<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Burmese Text Overlay</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; display: flex; flex-direction: column; align-items: center; background: #1a1a1a; color: #eee; padding: 20px; }
        .container { display: flex; gap: 25px; flex-wrap: wrap; justify-content: center; width: 100%; max-width: 1200px; }
        canvas { border: 3px solid #444; border-radius: 8px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); max-width: 100%; height: auto; background: #000; }
        .controls { background: #2d2d2d; padding: 20px; border-radius: 12px; width: 350px; height: fit-content; }
        .control-group { margin-bottom: 12px; border-bottom: 1px solid #444; padding-bottom: 10px; }
        label { display: block; font-size: 11px; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 8px; color: #aaa; }
        input[type="range"], textarea, input[type="file"] { width: 100%; box-sizing: border-box; }
        textarea { height: 80px; background: #111; color: #fff; border: 1px solid #555; border-radius: 4px; padding: 8px; font-size: 14px; resize: vertical; }
        .color-row { display: flex; gap: 10px; align-items: center; justify-content: space-between; }
        .color-picker-box { display: flex; align-items: center; gap: 5px; background: #3d3d3d; padding: 5px 10px; border-radius: 5px; flex: 1; }
        button { width: 100%; padding: 12px; background: #d4af37; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; font-size: 16px; margin-top: 10px; transition: 0.3s; }
        button:hover { background: #f6e5a0; transform: translateY(-2px); }
        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
    </style>
</head>
<body>

    <h2 style="color: #d4af37;">Burmese Script Editor</h2>

    <div class="container">
        <canvas id="textCanvas" width="1000" height="600"></canvas>

        <div class="controls">
            <div class="control-group">
                <label>1. Upload Photo</label>
                <input type="file" id="imageLoader" accept="image/*">
            </div>

            <div class="control-group">
                <label>2. Content (Press Enter for new lines)</label>
                <textarea id="textInput" placeholder="Enter text here...">မြန်မာစာ အလှရေးသားခြင်း&#10;အပိုဒ်ခွဲ စမ်းသပ်ချက်&#10;အချက်အလက် (၁)</textarea>
            </div>

            <div class="control-group">
                <label>3. Positioning (Left/Right & Up/Down)</label>
                <div class="grid-2">
                    <div>
                        <small>X-Axis</small>
                        <input type="range" id="xPos" min="0" max="1000" value="50">
                    </div>
                    <div>
                        <small>Y-Axis</small>
                        <input type="range" id="yPos" min="0" max="600" value="100">
                    </div>
                </div>
            </div>

            <div class="control-group">
                <label>4. Formatting</label>
                <div class="grid-2">
                    <div>
                        <small>Font Size</small>
                        <input type="range" id="fontSize" min="10" max="150" value="50">
                    </div>
                    <div>
                        <small>Line Spacing</small>
                        <input type="range" id="lineSpacing" min="1" max="3" step="0.1" value="1.4">
                    </div>
                </div>
            </div>

            <div class="control-group">
                <label>5. Gold Gradient Colors</label>
                <div class="color-row">
                    <div class="color-picker-box">
                        <input type="color" id="color1" value="#f6e5a0">
                        <small>Top</small>
                    </div>
                    <div class="color-picker-box">
                        <input type="color" id="color2" value="#b38e46">
                        <small>Bottom</small>
                    </div>
                </div>
            </div>

            <div class="control-group">
                <label>6. Alignment</label>
                <select id="textAlign" style="width:100%; padding:5px; background:#111; color:#fff;">
                    <option value="left">Left Aligned</option>
                    <option value="center" selected>Centered</option>
                    <option value="right">Right Aligned</option>
                </select>
            </div>

            <button id="downloadBtn">Export Final Image</button>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('textCanvas');
        const ctx = canvas.getContext('2d');
        const elements = [
            'imageLoader', 'textInput', 'fontSize', 'xPos', 'yPos', 
            'color1', 'color2', 'lineSpacing', 'textAlign'
        ].reduce((acc, id) => {
            acc[id] = document.getElementById(id);
            return acc;
        }, {});

        let img = new Image();

        window.onload = () => draw();

        elements.imageLoader.addEventListener('change', (e) => {
            const reader = new FileReader();
            reader.onload = (event) => {
                img.onload = () => {
                    canvas.height = (img.height / img.width) * canvas.width;
                    elements.yPos.max = canvas.height;
                    elements.xPos.max = canvas.width;
                    draw();
                };
                img.src = event.target.result;
            };
            reader.readAsDataURL(e.target.files[0]);
        });

        Object.values(elements).forEach(el => {
            if(el.id !== 'imageLoader') el.addEventListener('input', draw);
        });

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            if (img.src) {
                ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
            } else {
                ctx.fillStyle = "#222";
                ctx.fillRect(0, 0, canvas.width, canvas.height);
            }

            const lines = elements.textInput.value.split('\n');
            const fSize = parseInt(elements.fontSize.value);
            const lineH = fSize * parseFloat(elements.lineSpacing.value);
            
            ctx.font = `bold ${fSize}px "Pyidaungsu", "Myanmar3", sans-serif`;
            ctx.textAlign = elements.textAlign.value;
            ctx.textBaseline = "top";

            // Loop through lines to create paragraph effect
            lines.forEach((line, index) => {
                const currentY = parseInt(elements.yPos.value) + (index * lineH);
                
                // Create Gradient for each line
                const gradient = ctx.createLinearGradient(0, currentY, 0, currentY + fSize);
                gradient.addColorStop(0, elements.color1.value);
                gradient.addColorStop(1, elements.color2.value);

                // Shadow for 3D depth
                ctx.shadowColor = "rgba(0,0,0,0.7)";
                ctx.shadowOffsetX = 3;
                ctx.shadowOffsetY = 3;
                ctx.shadowBlur = 6;

                ctx.fillStyle = gradient;
                ctx.fillText(line, parseInt(elements.xPos.value), currentY);
            });
        }

        document.getElementById('downloadBtn').addEventListener('click', () => {
            const link = document.createElement('a');
            link.download = 'burmese-design.png';
            link.href = canvas.toDataURL('image/png');
            link.click();
        });
    </script>
</body>
</html>
